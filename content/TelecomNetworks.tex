

\section{Telecommunication Networks - Transport Networks}

From the courses Internet Networks and Services (RSI in portuguese) and Telecommunication Networks (RTel in pt) I've had an insight about how the whole network is multiplexed into optic fibers and many other interesting topics such as the triple play services and a bunch of protocols that are used in today's world to make everything communicate with everything. Therefore, I propose to write a sum up of the slides and bibliography of RSI and RTel in this section. I'll mainly give importance to RTel since it is what I'm studying at the moment, but I hope to go through the slides of RSI as well.

\begin{multicols}{2}
\begin{enumerate}
    \item Introduction \\(2 lessons)
    \item Fundamentals of networks \\(7 lessons)
    \item Ethernet and data centre networks \\(5 lessons)
    \item SDH transport networks \\(4 lessons)
    \item Optical transport networks \\(4 lessons)
    \item Access networks \\(3 lessons)
\end{enumerate}

\columnbreak

\begin{enumerate}
    \item The Internet
    \item Quality of Service on the Internet
    \item IP Network Models
    \item Next Generation Networks
    \item The Telephony Network
    \item Technologies for data transport
    \item MPLS - Multi-Protocol Label Switching
\end{enumerate}
\end{multicols}

\subsection{Introduction}

\bb{Definition}\hspace{-.2cm} \ii{Telecommunications}:  is the transmission of information at a distance through the use of electromagnetic signals.

\defining{Telecom. Network} collection of nodes and links with the purpose of interchanging these signals in order to have an information flow.

These Telecommunication Networks can be public, owned by Telecom. / Network Operators that use that network to provide services to the general public, or can be private, used by a company to connect infrastructures. Many of these private networks also rely on leased links by public networks.

There are mainly 3 layers in a network: the backbone or core, the metropolitan and the access layer. As expected, the access layer collects the traffic, connections to homes, offices, everywhere the internet is required. The metropolitan area connects different parts of the city that use that network, typically with a ring (made out of optic fiber). The core is the most extensive layer, with a mesh of nodes and very extensive links that connect cities of the whole world. Hundreds or thousands of km's is not atypical.

What makes possible to communicate with everyone connected to the internet is that the networks of both operators are also connected.

As a public service, the public networks must provide fidelity (transmit the information without loss of changes) and reliability (less than 3 minutes down per year).


\vspace{.5cm}

Nowadays, most of transmission is digital. A series of pulses is transmitted through a channel with attenuation, dispersion, interference from other signals and noise. Therefore what reaches the other side is considerably different and has to be estimated what the original input was.

\quickimage{RTel/Cap1-001.png}{0.6}

As having a dedicated physical infrastructure for each service would be far to expensive and messy, the big majority of services share the same channel, the optic fiber. It is easily shared because of the available bandwidth in it. Thus, the signals are multiplexed at the entrance, using different wavelengths (\bb{Wavelength-Division Multiplexing (WDM)}) and de-multiplexed at the other end, to follow each one to their device that is requiring the service. 

Note that WDM is exactly like \bb{Frequency Division Multiplexing (FDM)} but in the optical domain. Technically they are exactly the same as changing the wavelength is nothing more than changing the transmit frequency.

A single mode optical fiber can reach throughputs of 10 Terabits per second.

Remember that there are many ways of scheduling frames in a multiplexer. With time slots or doing it statistically are two ways. Also, there are 2 types of switching: packet switching and circuit switching. Circuit is when a channel is constantly reserved for a certain application even if it is not being used. Packet switching allows a much better share of the resources. Packet switching principle is based on sending packets whenever there's a packet to transmit and use all the resources to do so as fast as possible. Therefore, the "speed" of the internet depends a lot on the amount of people that are accessing it. 

Regarding the physical infrastructures for the transmission of data, those go from satellites, well the open space in general as microwave links are also a thing, twisted pairs, optical fibers and even a few more that are less common.

Finally, a look at the tendencies is pertinent. The traffic is increasing constantly, at a rate of 30\% a year, therefore the network must be upgraded as the time passes as well, or else it won't be able to handle the traffic of the future. Not only are the links being upgraded since now we have fiber to the home, terminating really in our router, but each node must be upgraded as well to cope with the traffic resulting in new switches, larger datacentres, ect... However, all of this must be standardised to guarantee compatibility between countries, operators, manufacturers and users and to ensure minimum quality of service for all users. This standardisation is done by the International Telecommunication Union (ITU) that has two main sectors of interest: the -T sector regarding telecommunications in general and the -R sector for radiocommunications that is more focused in point-to-point, mobile, satellite links, ect\dots Additionally, ETSI, ISO, OSI, ANSI, IEEE are some of the main organisations that standardise technologies. IEEE is the best :)



\subsection{Networks Fundamentals}

A network is composed of nodes and links and can be represented by graphs.
However, a clear distinction between networks and graphs has been made in class: a network is a graph with a few more numbers that represent various network parameters. These parameters will be talked later, but can be delay of a link, distance, \dots


The physical topology concerns the physical connections that are in place while the logical topology for a certain case concerns the actual flow of information. Even though every computer is connected in a network, maybe the information always flows from one to the others and the graph that represents that has much less links.


A link can be unidirectional or bidirectional. If the link is unidirectional, sometimes is referred to as an arc. $e_1 = (v_1,v_2)$ is the representation of a link, and the order of the nodes matter if it's an arc.

In optical fiber networks, or other networks that require amplifiers, the space between amplifiers (distance the signal has to go attenuating) is called a span.


\quickimage{RTel/Cap2-001.png}{.5}

In a graph there's N number of Vertices($v_i$), and L number of Edges($e_j$). And the degree of the vertex is the number of edges it has.
It's called the order of the graph, it's number of vertices, and the size of the graph it's number of edges.

Directed graphs only have unidirectional links, while undirected graphs only have bidirectional links.

\bb{The reason to make the distinction between directed and undirected graphs}(unidirectional and bidirectional edges): in case of optical fiber, which is what connects most of long distance networking, is required to use more than one fiber. Because and optical emitter can't receive as well (at least in the same fiber). 
Also, if amplifiers are required, note that they are directed as well.

A path can be represented by a set of links, starting at some node. Source and sink are the names for the first and last vertex of that path.

\subsubsection{Network Topologies}

\quickimage{RTel/Cap2-002.png}{.5}


Bus, Ring and Star are the main physical topologies. Tree as well.

A tree is simply a graph with no cycles.

\subsubsection{Network representative Matrices}

A graph can be represented with an \bb{Adjacency matrix (A)}, with $a_{ij} = 1$ if there's a direction from the vertices i to j.

The average node degree is given by the average of each node's degree which won't be more than the sum of all links, times 2 divided by the number of nodes. Times 2 because each link contributes for the degree twice, once at each end.

\quickimage{RTel/Cap2-003.png}{.5}


The Network diameter ($D_R$) is the maximum number of links between nodes through the shortest path between them. $D_R$ is the longest of the shortest paths between every node.


Every link can have an associated cost (a function of distance, delay, reliability, actual cost, or other parameters) and a capacity ($u_e$ denotes the capacity of node $e$).

\quickimage{RTel/Cap2-004.png}{.5}


Despite similar to an Adjacency Matrix, the \bb{Demand matrix (D)} is slightly different. $d_{ij} = 1$ if the traffic flows from the vertex i to the vertex j.

Note that the diagonal of this matrix should be empty, or else it would mean that a certain node would receive information from himself, which makes no sense.

The mean number of demands is the number of demands divided by the number of nodes.

\quickimage{RTel/Cap2-005.png}{.5}

The number of unidirectional demands (edges) in a case of full mesh logical topology is $D_1  = N (N-1)$. N nodes x the other N-1 nodes. Note that 
One other way of seeing it is that the D matrix is $N \times N$ but we need to take N away due to the empty diagonal. $D_2 = \frac{D1}{2}$ is the number of bidirectional demands, which is when only the top triangle of the D matrix is considered. This is usual because with bidirectional links the D matrix will always be symmetric.



Another interesting matrix is the \bb{Traffic matrix (T)} and it's used to denote traffic intensities. It only has entries different from 0 in the exact same places the Demand matrix has. It's used for static traffic designs.

\quickimage{RTel/Cap2-006.png}{.5}


Considering now a Dynamic Traffic case, a few concepts arise:
\begin{itemize}
    \item Average intensity of data flow between two nodes;
    \item Traffic bursts are time intervals where the flux of data is considerably higher than the average rate;
    \item Peak rate is the maximum instantaneous intensity.
\end{itemize}

Aggregation level or multiplexing level reduces the traffic \ii{burstiness} because there less often flows get fully used and is more likely that the information can flow at a constant pace instead of in bursts.


\bb{Note} one important distinction between Logical and Physical Topologies that we haven't done yet is that there can be many logical topologies on one physical topology. This can happen in the following way: 


\quickimage{RTel/Cap2-007.png}{.5}



\bb{Routing} is how a packet travels in a network. Therefore, routing ends up being the map between logical and physical topologies. 

In optical networks the path between two nodes is usually called ``lightpath''.

We can also define a \bb{Cost Matrix (C)} where each element $c_{ij}$ represents the costs between nodes i and j.

The path can be performed manually (static routing - Demand matrix is time invariable) or dynamically, through routing algorithms (dynamic routing - Traffic matrix is time dependent, with constant arrival and termination of new demands).

Additionally, if the a given traffic demand(connection) is able to use more than one route, it is called a multipath routing process, else it is a mono-path process. Because there are usually many paths connecting two nodes, some metrics are taken into account when choosing which to follow:

\quickimage{RTel/Cap2-008.png}{.5}


From the physical topology, described by a graph G(V,E) and the traffic matrix T, describing all the traffic demands to be routed, one can perform shortest path algorithms such as Dijkstra's algorithm.

\quickimage{RTel/Cap2-009.png}{.5}

\bb{Dijkstra's Algorithm}

\quickimage{RTel/Cap2-010.png}{.5}

Now is pertinent to introduce yet another matrix, the \bb{Hop Matrix (H)} where each element $h_{ij}$ denotes the minimum number of hops from node i to node j.

The average number of hops per demand is nothing more than the sum of the hops of all demands divided by the number of demands. The number of demands was set as the unidirectional links between two nodes. Therefore, if 2 nodes share information between themselves (don't need to have a physical link, a logical one is enough) then there's a demand. 

Therefore, the average number of hops can be computed:

\quickimage{RTel/Cap2-011.png}{.5}

Note that coherence is key here. If the amount of demands are the bidirectional demands, then the number of hops considered should only be the top half of the hop matrix. \bb{If links are bidirectional, then there will always be a symmetry in these matrices} and we should compute the average with amount that mean the same thing.


As means of simplifying this calculation, because hops and demands can be dynamic, a way of having a notion on the order of magnitude and get a fairly good approximation, when the number of nodes N is $4 \leq N \leq 100$ and the average node degree $<\delta>$ is $2.5 \leq  <\delta> \leq 5 $, is by computing the semi-empirical relation:

\quickimage{RTel/Cap2-012.png}{.5}



\subsubsection{Layers}

Typically, there's a layered structure in the network. The layer above acts as a client of the layer beneath and each layer appears a black box that supplies a service to the layer above.


The service layer is the one closer to us. 

\quickimage{RTel/Cap2-013.png}{.5}


\bb{Add/Drop Multiplexing(ADM)} are multiplexers controlled by \bb{Control Centres (CC)} that decide what to add and what to drop form the fibre. Note that these don't manage the network, they just use it.

Nowadays, apart from local networks, everything is connected with fibre. Therefore, is pertinent to mention 4 key technologies for transport networks:

\quickimage{RTel/Cap2-014.png}{.5}

SDH is also used in Hertzian links, MPLS is Multiprotocol Label Switching and is very useful for routing through different technologies and to choose more carefully the paths. As said above, OTN will be our transport technology.

OTN has become the new standard for a while now and has a few differences compared with SDH. The most important of which is distinction between fixed frame size and fixed rates. SDH has a fixed rate while OTN can increase it's rate to match the client's and this is very important for scalability and being more future proof

\bb{A very important distinction between the transport and the service layers} is that the representation in the service layer has nodes connected with \bb{logical topologies} while the transport layer has nodes connected with \bb{physical topologies}.


\quickimage{RTel/Cap2-015.png}{.5}

The network management systems sends configurations through the \bb{Data Communication Channel (DCC)}. Moreover, not all parts of the network are the same!

\quickimage{RTel/Cap2-016.png}{.5}


One important distinction in terms of how things are connected physically is evident comparing the access networks with the other parts of the network. Access Networks, as opposed to what happens to the rest of the network, uses twisted pair or one optic fiber. This is because of the cost versus the bandwidth a fiber offers. One fiber can carry several times the traffic of one user, therefore can be used for multiple users. Moreover, very often the final leg is done with twisted pair due to cost reasons.

In a more abstracted way, one can identify three planes:

\quickimage{RTel/Cap2-017.png}{.5}

As you already know, there are circuit switched or packet switched networks.

Circuit Switched require circuit establishment and tear-down at the beginning and at the end, respectively. However, a distinction is made between physically \ii{switchable} circuits and semi-permanent circuits. The first ones, a physical circuit is easily switched to connect one end to the other, while the second type regards circuits that are more static, that are much more difficult to switch. The semi-permanent must be switched by the administrators in order to attribute these circuits to a user for a somewhat long period of time (not just one transmission).
\quickimage{RTel/Cap2-019.png}{.5}

Then, of course, there are packet switched networks that allow a much better share and efficient use of resources.

\bb{The key notion to have is that all services use the transport network! This is the highway of data! Nowadays it is impossible to have dedicated physical connections for each service. And this section of \ii{Networks - Transport Networks} is based on that!}



\subsubsection*{Telephone Networks}
Telephone Networks before used circuit-switching. Note that the only ones that use circuit-switching are the landlines! Nowadays, our mobile communications are able to replace this fixed circuits lines

Local exchanges (Access) - are small switching centres that serve a small area.

Transit exchanges(metro, core) occur in \bb{Primary trunk exchanges} is used to transfer the traffic and to interconnect several circuits.

They usually have a physical connection between them, but not one of their own. It wouldn't be viable to have dedicated circuits. It's here that the transport networks comes.

Different components have different topologies. The network is a hierarchy, having different topologies in different parts of the network.

Digital Circuit-switching meaning that the data being switched is of digital nature.



\subsubsection*{Hybrid Fibre-Cable Network}

There's an head end that distributes all the channels for all the users. 

The network is called hybrid because it uses both fibre and coaxial cable.


Excellent example of a tree network. Like all the networks with share mediums, it required multiple access protocols to allow everyone to use the medium (FDMA and TDMA are 2 of the multiple access technologies).


\quickimage{RTel/Cap2-020.png}{.5}

The transport network is represented by the optical fibre that connects the head head to the optical access node. Like the cellular communications, one optical access node covers a certain area, with coaxial cable.


\subsubsection*{IP Networks}

There are 2 ways of sending IP packets:

- Without Connection, it is necessary to have a buffer to reassemble all the IP packets. The packets are simply send to the network in a best effort way.

- With Connection: when certain QoS is required, then MPLS is used, so that certain resources can be reserved and the QoS met.
MPLS establishes a virtual circuit before starting transmitting the packets.
MPLS acts between layer 2 and layer 3. It places a label between the layer 2 and layer 3 labels.

There are 2 types of MPLS routers:
- LER - Label Edge Router are the ones that put the labels and take them out;
- LSR - Label Switching Router simply take labels out.

MPLS works by pre-establishing a path for information flow. Then, at each hop, according to the label id's available in each LSR the label arrives with one number and it leaves with other, based on the MPLS routing table in each MPLS capable router. This table entries are created based on the MPLS protocol and pre-path find procedures.


This is how a MPLS table looks like: 

\quickimage{RTel/Cap2-025.png}{.5}




Generalized MPLS (GMPLS) is the \ii{de facto} (practice that exists practically even though it is not formalized by law) of the control plane of the Wavelength Switched Optical Network (WSON).

Label Switching allows Traffic Engineering:

\quickimage{RTel/Cap2-024.png}{.5}




\subsubsection{Layered Model Overview}
Open Systems Interconnection Model:
\quickimage{RTel/Cap2-021.png}{.5}


Transport layer connects applications.
Network layer connects machines with different IPs.
Data link layer connects two machines with their interfaces' MAC addresses.
Physical layer is what is responsible for putting the data into a cable or into the air to perform the actual transmission. For instances, spectrum, modulation and coding techniques and intervals of transmission.




\quickimage{RTel/Cap2-022.png}{.5}

\quickimage{RTel/Cap2-023.png}{.5}




\subsection{Ethernet Networks}

Most of today's network traffic is generated from Ethernet interfaces. Made from twisted copper pair, through slightly more advance techniques and protocols is still possible to get quite a good throughput with a low cost cable.

Uses CSMA/CD Carrier-sense multiple access with collision detection because it can sense if there's anyone using the bus at all times. WiFi for instances CSMA/CA is used since we may be causing a collision we can't detect.

The Ethernet protocol 802.3 is used in all parts of the transport layer, not only at the access level and specially not only in LAN (Local Area Networks). Note that the Ethernet protocol was standardised by IEEE and the standard specifies not only the physical specifications but also Data Link Layer frame formats.
WiFi 802.11 is another protocol that includes physical, like transmit powers and modulations, and Data Link specifications 

A rule of thumb is to use optical cables for distances above 100 metres.

\quickimage{RTel/Cap3-001.png}{0.6}

\begin{itemize}
    \item The LLC (Logical Link Control) sub-layer is responsible
    for the flow and error control between the nodes.
    \item The MAC sub-layer is responsible for the media
    access control, addressing, error detection, frame
    delimitation, by organizing the bit sequences into
    frames.
    \item The physical layer deals with the bit transmission
    and reception, with the electrical, optical and
    mechanical properties of the interfaces, with the type
    of connectors used, etc.
\end{itemize}


The Data Link layer is responsible for frame processing, and error detection through the calculation of a CRC (Cyclic Redundancy Check). If a frame has errors, it is discarded.
Most of error correction is done higher up in the stack. TCP guarantees error free transmissions when it says they were successful.

MAC stands for Media Access Control. Thus, the MAC addresses are addresses to access the physical media. CSMA protocols are placed in this layer. 

There are 2 bits in the MAC address, the two least significant ones form the first octet.

\quickimage{RTel/Cap3-004.png}{.5}

U/L refers to the uniqueness of the interface. The MAC address can be changed becoming a local one. I/G refers to one interface only or a group that has that MAC address that received always the same thing. 

Write \ii{ifconfig} or \ii{ip a} in linux (or \ii{ipconfig} in windows) is possible to see this MAC address.


\quickimage{RTel/Cap3-002.png}{.5}


Because there are only 1500 bytes to address (to count) with the Length/Type field, then there will be quite a few empty bits in this field. The rest of the bits are used to denote the type of the frame: 


\quickimage{RTel/Cap3-003.png}{.5}


The purpose of the Preamble is to achieve clock synchrony.





\subsubsection{Multiple Access}

TDMA, FDMA (WDMA), CDMA all have the same principle: divide signals in a given domain. 

TDMA divides signals in the time domain: different transmissions occupy different time slots.

FDMA divides in frequencies, WDMA divides in wavelengths. The only difference is that one is more used in wireless applications and the other with fibres.



OFDMA starts combine the previous ideas: divides in the time and in the frequency domains, therefore is able to attribute resource blocks with much better efficiency. A use of OFDMA is in 4G and 5G where a physical resource block is nothing more than a set of sub-carriers used for a given time period, usually called one TTI (Transmission Time Interval).

CDMA is used in 3G and with GPS, so that different satellite can transmit all at the same time.

Then there's another category of multiple access techniques like CSMA. Namely CD and CA, collision detection and collision avoidance. 


Collision Detection is when a collision is possible to be detected and after being detected certain steps are taken to minimize the risk of happening again.

Collision Avoidance is when the collision can't be detected and 


\subsubsection{light in fibre}
The speed of light inside an optical fibre, considering an average glass refractive index of 1.5, is:
\begin{equation}
    v = \frac{c}{n} = 2 \times 10^8 m/s
\end{equation}

